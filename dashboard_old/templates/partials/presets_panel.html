<!-- Presets Panel -->
<div class="space-y-6">
    <div class="flex items-center justify-between">
        <h2 class="text-2xl font-bold">Preset Models</h2>
        <div class="flex items-center gap-2">
            <input type="text" placeholder="Search presets..."
                   class="px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none">
        </div>
    </div>

    {% if categories is not defined %}
    <!-- Loading state -->
    <div class="text-center py-12">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"></div>
        <p class="mt-4 text-slate-400">Loading presets...</p>
    </div>
    {% else %}
    {% for category_name, presets in categories.items() %}
    <div class="bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden">
        <div class="px-6 py-4 border-b border-slate-800 bg-slate-800/50">
            <h3 class="font-semibold text-lg">{{ category_name }}</h3>
            <p class="text-sm text-slate-400 mt-1">{{ presets|length }} presets available</p>
        </div>

        <div class="divide-y divide-slate-800">
            {% for preset in presets %}
            <div class="px-6 py-4 hover:bg-slate-800/30 transition-colors">
                <div class="flex items-start justify-between">
                    <div class="flex-1">
                        <div class="flex items-center gap-3">
                            <h4 class="font-medium">{{ preset.name }}</h4>
                            <span class="px-2 py-1 text-xs rounded-full bg-accent-500/20 text-accent-400">
                                {{ preset.type }}
                            </span>
                        </div>
                        <p class="text-sm text-slate-400 mt-1">{{ preset.description }}</p>
                        <div class="flex items-center gap-4 mt-2 text-sm text-slate-500">
                            <span>{{ preset.files }} files</span>
                            <span>{{ preset.size }}</span>
                        </div>
                    </div>

                    {% if user == 'admin' %}
                    <button hx-post="/api/presets/{{ preset.id }}/download"
                            hx-vals='{"preset_id": "{{ preset.id }}"}'
                            class="ml-4 px-4 py-2 bg-primary-600 hover:bg-primary-700 rounded-lg text-sm transition-colors">
                        Download
                    </button>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
    {% endif %}
</div>
